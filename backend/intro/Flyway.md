# DB Flyway

## Flyway란?

Flyway는 DB 마이그레이션을 위한 도구이다.

### DB 마이그레이션이 필요한 이유

- 여러 환경에서, 동일한 버전을 유지하기 위해서
- 변경사항의 적용을 쉽게하기 위해서

## 마이그레이션 동작 과정

1. DB에 `flyway_schema_history`*라는 테이블이 생성된다.*
2. 마이그레이션을 위한 파일들을 찾아, 버전 순서대로 실행한다.
3. 실행한 이력을 `flyway_schema_history` 에 저장한다.

## 명령어들

- `Migrate` : 최신 버전으로 변경한다.
- `Clean` : 스키마의 모든 요소를 제거한다.
- `Info` : 마이그레이션 정보를 출력한다.
- `Validate` : 적용된 마이그레이션을 검증한다.
- `Undo` : 최근에 적용된 마이그레이션을 취소한다.
- `Baseline` : 기존에 있던 DB 데이터들을 baseline(초기 기준)으로 설정한다.
- `Repair` : 마이그레이션 기록을 정상화한다.
    - 잘못된 마이그레이션 제거
    - 마이그레이션 재정렬
    - 없어진 마이그레이션을 삭제처리
- `Check`: 검사를 통해 신뢰성을 높임